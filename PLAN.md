# خطة الانتقال إلى تطبيق React Native للجوال

**المبدأ الأساسي:** سنعتمد بنية **Monorepo** (مستودع أحادي) باستخدام `pnpm workspaces`. هذا سيسمح لنا بوضع الشيفرة المشتركة (منطق العمل، الأنواع، الثوابت) في حزمة مركزية (`packages/core`) يمكن لكل من تطبيق الويب (`apps/web-app`) وتطبيق الموبايل (`apps/native-app`) استخدامها.

**التقدير الزمني الإجمالي:** 8 - 12 أسبوعاً.

---

### **المرحلة صفر: الصيانة، التنظيف، والتحضير (أسبوع واحد) - ✅ مكتمل**

**الهدف:** تجهيز قاعدة الشيفرة الحالية لتكون قابلة للفصل وإعادة الاستخدام بسهولة.

1.  **فصل منطق العمل عن واجهة المستخدم (UI Separation):** ✅ مكتمل.
2.  **مركزية الأنواع والثوابت (Centralize Types & Constants):** ✅ مكتمل.
3.  **تنظيف التبعيات (Dependency Audit):** ✅ مكتمل.
4.  **توحيد طبقة الوصول للبيانات (API Layer):** ✅ مكتمل.

---

### **المرحلة الأولى: بناء هيكل المشروع (Monorepo) (أسبوع واحد) - ✅ مكتمل**

**الهدف:** إنشاء البنية التحتية للمشروع الجديد التي ستستضيف كلا التطبيقين.

1.  **إعداد الـ Monorepo:** ✅ مكتمل.
2.  **ترحيل الشيفرة المشتركة:** ✅ مكتمل (تم نقل كل شيء إلى `packages/core`).
3.  **إعادة هيكلة تطبيق الويب:** ✅ مكتمل (تم نقل الواجهات إلى `apps/web-app` وتحديث الاستيرادات).
4.  **إنشاء تطبيق React Native:** ✅ مكتمل (تم إنشاء هيكل أساسي في `apps/native-app`).

---

### **المرحلة الثانية: ترحيل الواجهات تدريجيًا (4 - 6 أسابيع) - ✅ مكتمل**

**الهدف:** إعادة بناء واجهات المستخدم شاشة تلو الأخرى باستخدام مكونات React Native، مع إعادة استخدام كل المنطق المشترك من حزمة `core`.

1.  **إعداد الملاحة (Navigation):** ✅ مكتمل.
2.  **ترحيل المكونات الأساسية:** ✅ مكتمل.
3.  **ترحيل الشاشات:** ✅ مكتمل (تم ترحيل جميع الشاشات الرئيسية والفرعية).

---

### **المرحلة الثالثة: تكييف الميزات الخاصة بالمنصة (2 - 3 أسابيع) - ✅ مكتمل**

**الهدف:** استبدال الميزات المعتمدة على المتصفح بنظيراتها في بيئة الموبايل.

1.  **الإشعارات (Push Notifications):**
    *   **المهمة:** استبدال Web Push بـ `expo-notifications`. (مؤجل للمرحلة النهائية)

2.  **تحديد الموقع الجغرافي (Geolocation):**
    *   **المهمة:** ✅ استبدال `navigator.geolocation` بواجهة موحدة (`@capacitor/geolocation`).

3.  **التخزين المحلي (Local Storage):**
    *   **المهمة:** ✅ استبدال `localStorage` بنظام `AsyncStorage` غير متزامن وموحد عبر المنصات.

---

### **المرحلة الرابعة: الاختبار والنشر (أسبوع واحد)**

**الهدف:** ضمان جودة التطبيق ونشره على متاجر التطبيقات.

1.  **الاختبار الداخلي (QA).**
2.  **النشر التجريبي (Beta Testing).**
3.  **النشر النهائي.**